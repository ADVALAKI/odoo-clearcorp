<openerp>
	<data>
		
		<!-- Account voucher payment and purchase inherit -->
		
		<record model="ir.ui.view" id="view_vendor_receipt_form">
			<field name="name">account.voucher.receipt.form</field>
			<field name="model">account.voucher</field>
			<field name="inherit_id" ref="account_voucher.view_vendor_receipt_form"/>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<data>
					<field name="journal_id" position="replace">
						<field name="journal_id"
								domain="[('payment_method','=','True')]"
								widget="selection" select="1"
								on_change="onchange_partner_id(partner_id, journal_id, amount, currency_id, type, date, context)"
								string="Payment Method"/>
					</field>
				</data>
			</field>
		</record>
		
		<record model="ir.ui.view" id="view_purchase_receipt_form">
			<field name="name">account.voucher.purchase.form</field>
			<field name="model">account.voucher</field>
			<field name="inherit_id" ref="account_voucher.view_vendor_payment_form"/>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<data>
					<field name="journal_id" position="replace">
						<field name="journal_id"
							domain="[('payment_method','=','True')]"
							widget="selection" select="1"
							on_change="onchange_partner_id(partner_id, journal_id, amount, currency_id, type, date, context)"
							string="Payment Method"/>
					</field>
				</data>
			</field>
		</record>

		
		
		<record id="action_vendor_payment2" model="ir.actions.act_window">
			<field name="name">Supplier Payment</field>
			<field name="res_model">account.voucher</field>
			<field name="view_type">form</field>
			<field name="domain">[('journal_id.payment_method', '=', 'True')]</field>
			<field name="context">{'payment_method':'True'}</field>
			<field name="view_id" eval="False"/>
			<field name="search_view_id" ref="account_voucher.view_voucher_filter_vendor_pay"/>
			<field name="target">current</field>
			<field name="help">The supplier payment form allows you to track the payment you do to your suppliers. When you select a supplier, the payment method and an amount for the payment, OpenERP will propose to reconcile your payment with the open supplier invoices or bills.</field>
		</record>
		<record id="action_vendor_payment_tree" model="ir.actions.act_window.view">
			<field eval="1" name="sequence"/>
			<field name="view_mode">tree</field>
			<field name="act_window_id" ref="action_vendor_payment2"/>
		</record>
		<record id="action_vendor_payment_form" model="ir.actions.act_window.view">
			<field eval="2" name="sequence"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="account_voucher.view_vendor_payment_form"/>
			<field name="act_window_id" ref="action_vendor_payment2"/>
		</record>
		
		<record id="account_voucher.menu_action_vendor_payment" model="ir.ui.menu" >
			<field name="action" ref="action_vendor_payment2"/>
		</record>
		
		<!-- 
		
		ACCOUNT JOURNAL MODIFICATION
		
		-->
		<record model="ir.ui.view" id="view_account_journal_method_ext">
			<field name="name">account.journal.relation.form</field>
			<field name="model">account.journal</field>
			<field name="type">form</field>
			<field name="inherit_id" ref = "account.view_account_journal_form"/>
			<field name="arch" type="xml">
				<data>
					<field name = "type" position = "after">
						<group colspan = "2" col = "4">
							<separator string = "Payment Options"/>
							<field name = "payment_method"/>
							<field name = "payment_verification"/>
						</group>
					</field>
				</data>
			</field>
		</record>
	</data>
</openerp>
