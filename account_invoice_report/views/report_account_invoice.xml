<?xml version="1.0" encoding="UTF-8" ?>
<openerp>
    <data>
        <!-- account.invoice.report -->
        <record id="view_account invoice_report" model="ir.ui.view">
            <field name="name">view.account.report</field>
            <field name="inherit_id" ref="account.report_invoice_document" />
            <field name="priority" eval="50" />
            <field name="type">qweb</field>
            <field name="arch" type="xml">
	            <xpath expr="//t[@t-call='report.external_layout']" position="replace">
	               <div class="header">
                        <t t-if="o and 'company_id' in o">
                            <t t-set="company" t-value="o.company_id"></t>
                        </t>
                        <t t-if="not o or not 'company_id' in o">
                            <t t-set="company" t-value="res_company"></t>
                        </t>

                        <div class="row">
                            <div class="col-xs-3">
                                <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo"
                                    style="max-height: 45px;" />
                            </div>
                            <div class="col-xs-6 text-left" style="margin-top:20px;">
                                <h3>
                                    <strong>
                                        <span t-field="o.company_id" />
                                    </strong>
                                    <br />
                                    <span t-field="o.company_id.company_registry" />
                                </h3>
                                <t t-if="o.company_id.street">
                                <span easyfx="align: horiz left" t-field="o.company_id.street"></span> 
                                <span>,</span> 
                                </t>
                                <t t-if="o.company_id.street2">
                                    <span easyfx="align: horiz left" t-field="o.company_id.street2"></span>
                                    <span>,</span>
                                </t>
                                <t t-if="o.company_id.city">
                                    <span easyfx="align: horiz left" t-field=" o.company_id.city"></span>
                                    <span>,</span>
                                </t>
                                <t t-if="o.company_id.state_id">
                                    <span easyfx="align: horiz left" t-field=" o.company_id.state_id"></span>
                                    <span>,</span>
                                </t>
                                <t t-if="o.company_id.country_id">
                                    <span easyfx="align: horiz left" t-field=" o.company_id.country_id"></span>
                                    <span>.</span>
                                </t>
                            </div>
                            <div class="col-xs-3 text-left"
                                style="margin-top:35px;border:2px solid black;border-radius:8px;">
                                <h4>
                                    <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')">Invoice</span>
                                    <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
                                    <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                                    <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                                    <span t-if="o.type == 'out_refund'">Refund</span>
                                    <span t-if="o.type == 'in_refund'">Supplier Refund</span>
                                    <span t-if="o.type == 'in_invoice'">Supplier Invoice</span>
                                </h4> 
                                 <h6><span t-field="o.number"/></h6>
                            </div>
                        </div>

                        <div class="row zero_min_height">
                            <div class="col-xs-12">
                                <div style="border-bottom: 1px solid black;" />
                            </div>
                        </div>
                    </div>
                   
                    <div class="page">
                        <div class="row">
                            <div class="col-xs-12" style="border:1px solid black;">
                                <div class="col-xs-6">
                                    <t t-if="o.type == 'in_invoice'">
                                    <strong>Supplier:</strong>
                                    </t>
                                    <t t-if="o.type == 'out_invoice'">
                                    <strong>Partner:</strong>
                                    </t>
                                    <span t-field="o.partner_id" />
                                    <br />
                                    <strong>Phone:</strong>
                                    <span t-field="o.partner_id.phone" />
                                    <br />
                                     <t t-if="o.partner_id.street">
                                        <strong>Invoice and shipping address:</strong>
                                            <address t-field="o.partner_id"
                                                t-field-options='{"widget": "contact", "fields": ["address"], "no_marker": true}' />
                                            <span t-if="o.partner_id.vat">VAT: <span t-field="o.partner_id.vat"/></span>
                                     </t>
                                </div>
                                <div class="col-xs-6">
                                    <strong>
                                        <span>Invoice Date:</span>
                                    </strong>
                                    <span t-field="o.date_invoice" t-field-options='{"format": "dd/MM/YYYY"}' />
                                    <br />
                                    <strong>Due Date:</strong>
                                    <span t-field="o.date_due" />
                                    <br />
                                    <strong>Payment Method:</strong>
                                    <span t-field="o.payment_term" />
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <table class="table table-condensed" width="100%">
                                <thead>
                                <br/>
                                    <tr>
                                        <th class="text-center" style="border:1px solid black;min-width:270px;">Descripci√≥n</th>
                                        <th style="border:1px solid black;" width="10%">Cantidad</th>
                                        <th class="text-center" style="border:1px solid black;" width="16%">Precio unitario</th>
                                        <th class="text-center" style="border:1px solid black;" width="17%">Precio total</th>
                                    </tr>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <tr t-foreach="o.invoice_line" t-as="l">
                                        <td style="border:1px solid black;"><span t-field="l.name"/></td>
                                        <td class="text-center" style="border:1px solid black;">
                                            <span t-field="l.quantity"/>
                                            <span t-field="l.uos_id" groups="product.group_uom"/>
                                        </td>
                                        <td class="text-right" style="border:1px solid black;">
                                            <span t-field="l.price_unit" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                        <td class="text-right" style="border:1px solid black;">
                                            <span t-field="l.price_subtotal_not_discounted" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row" style="page-break-inside: avoid;">
                            <table class="table table-condensed" width="100%">
                                <thead>
                                </thead>
                                <tbody class="invoice_tbody">
                                    <tr>
                                        <td style="border:none; min-width:270px;">
                                        </td>
                                        <td style="border:none;" width="10%">
                                        </td>
                                        <td class="text-right" style="border:1px solid black;" width="16%"><b>subtotal</b></td>
                                        <td class="text-right" style="border:1px solid black;" width="17%">
                                            <span t-field="o.amount_untaxed_not_discounted" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                    </tr>
                                    <tr t-if="o.amount_discounted">
                                        <td style="border:none; min-width:270px;">
                                        </td>
                                        <td style="border:none;" width="10%">
                                        </td>
                                        <td class="text-right" style="border:1px solid black;" width="16%"><b>Total Without Taxes</b></td>
                                        <td class="text-right" style="border:1px solid black;" width="17%">
                                            <span t-field="o.amount_discounted" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none;  min-width:270px;">
                                        </td>
                                        <td style="border:none;" width="10%">
                                        </td>
                                        <td class="text-right" style="border:1px solid black;" width="16%"><b>Taxes</b></td>
                                        <td class="text-right" style="border:1px solid black;" width="17%">
                                            <span t-field="o.amount_tax" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none; min-width:270px;">
                                        </td>
                                        <td style="border:none; " width="10%">
                                        </td>
                                        <td class="text-right" style="border:1px solid black;" width="16%"><b>Total</b></td>
                                        <td class="text-right" style="border:1px solid black;" width="17%">
                                             <span t-field="o.amount_total" t-field-options='{"widget": "monetary", "display_currency": "o.currency_id"}'/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 pull-left">
                                <p t-if="o.comment">
                                <h5><b>Aditional information:</b></h5>
                                <span t-field="o.comment"/>
                                </p>
                                <div class="text-left">
                                    <h5><b><span>Bank Accounts</span></b></h5>
                                    <t t-foreach="company.bank_ids" t-as="b">
                                        <div class="text-left">
                                            <span t-field="b.bank_name" />
                                            <span t-field="b.acc_number" />
                                                <t t-if="b.currency_id">
                                                    (
                                                    <span t-field="b.currency_id.name" />
                                                    )
                                                </t>
                                        </div>
                                    </t>
                                </div>
                            </div>
                            <br>
                            </br>
                            <br>
                            </br>
                            <br>
                            </br>
                        </div>
                    </div>
                    <div class="footer text-center">
                        <div class="text-center" style="border-top: 1px solid black;">
                            <h6>
                                <span>Authorized by Trade No.</span>
                                <span t-field="company.number_trade"/>
                                <ul t-if="not company.custom_footer" class="list-inline">
                                    <li t-if="company.website">&amp;bull;</li>
                                    <li t-if="company.website">
                                        <b>Website:</b>
                                        <span t-field="company.website" />
                                    </li>
                                    <br />
                                    <li t-if="company.phone">&amp;bull;</li>
                                    <li t-if="company.phone">
                                        <b>Phone:</b>
                                        <span t-field="company.phone" />
                                    </li>
                                    <li t-if="company.email">&amp;bull;</li>
                                    <li t-if="company.email">
                                        <b>Email:</b>
                                        <span t-field="company.email" />
                                    </li>
                                </ul>
                            </h6>
                        </div>
                    </div>
	            </xpath>
            </field>
        </record>
    </data>
</openerp>